<% content_for :title, "SaltShop — Minimal essentials" %>
<% content_for :meta_description do %>
  Discover matte, minimal products curated for calm everyday living.
<% end %>

<!-- HERO BANNER -->
<section class="relative overflow-hidden">
  <div class="relative max-w-[1400px] mx-auto px-6 lg:px-8 py-20 rounded-2xl"
       style="background: linear-gradient(0deg, rgba(0,0,0,.25), rgba(0,0,0,.25)), url('https://images.unsplash.com/photo-1509042239860-f550ce710b93?q=80&w=1600&auto=format&fit=crop'); background-size: cover; background-position: center;">
    <div class="max-w-2xl text-white animate-slide-up">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 text-white text-xs font-semibold uppercase">
        <i data-lucide="sparkles" class="w-4 h-4"></i>
        Coffee & Desk Kits
      </div>
      <h1 class="mt-4 text-4xl sm:text-5xl font-semibold">Matte, minimal, made to last.</h1>
      <p class="mt-4 text-lg text-white/90">Curated essentials in warm browns and soft neutrals. Calm design for everyday life.</p>
      <div class="mt-6 flex items-center gap-3">
        <%= link_to products_path, class: "btn-primary" do %>
          <i data-lucide="shopping-bag" class="w-4 h-4"></i>
          <span>Shop now</span>
        <% end %>
        <%= link_to about_path, class: "btn-ghost text-white hover:text-white" do %>
          <i data-lucide="info" class="w-4 h-4"></i>
          <span>About us</span>
        <% end %>
      </div>
    </div>
  </div>
</section>

<!-- TRUST BADGES -->
<section class="mt-10">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
      <% [
        {icon: 'truck', title: 'Free Shipping', body: 'On orders over $50'},
        {icon: 'rotate-ccw', title: '30-Day Returns', body: 'Hassle-free returns'},
        {icon: 'shield-check', title: 'Secure Checkout', body: 'Encrypted payments'},
        {icon: 'headset', title: '24/7 Support', body: 'We’re here to help'}
      ].each do |b| %>
        <div class="card p-4 flex items-start gap-3">
          <div class="action-icon"><i data-lucide="<%= b[:icon] %>" class="w-5 h-5"></i></div>
          <div>
            <div class="font-semibold" style="color: var(--text);"><%= b[:title] %></div>
            <div class="text-sm text-subtle"><%= b[:body] %></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>

<!-- CATEGORIES -->
<section class="mt-12">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-semibold" style="color: var(--text);">Shop by category</h2>
      <%= link_to products_path, class: "btn-ghost" do %>
        <i data-lucide="grid" class="w-4 h-4"></i>
        <span>Browse all</span>
      <% end %>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <% categories = [
        { title: 'Coffee Kits', q: 'coffee', img: 'https://images.unsplash.com/photo-1497515114629-f71d768fd07c?q=80&w=1200&auto=format&fit=crop' },
        { title: 'Desk Setup', q: 'desk', img: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop' },
        { title: 'Ceramics', q: 'ceramic', img: 'https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1200&auto=format&fit=crop' },
        { title: 'Organizers', q: 'organizer', img: 'https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1200&auto=format&fit=crop' }
      ] %>

      <% categories.each do |c| %>
        <%= link_to products_path(q: c[:q]), class: "card card-interactive group overflow-hidden relative h-44" do %>
          <img src="<%= c[:img] %>" alt="<%= c[:title] %>" class="absolute inset-0 w-full h-full object-cover" />
          <div class="absolute inset-0 bg-black/20 group-hover:bg-black/25 transition-colors"></div>
          <div class="absolute bottom-0 left-0 right-0 p-4">
            <div class="inline-flex items-center gap-2 px-2.5 py-1 rounded-md bg-white/90 text-[var(--text)] font-semibold">
              <i data-lucide="tag" class="w-4 h-4"></i>
              <%= c[:title] %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<!-- FEATURED PRODUCTS -->
<section class="mt-12">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="mb-6 flex items-center justify-between">
      <h2 class="text-2xl font-semibold" style="color: var(--text);">Featured Products</h2>
      <p class="text-sm text-subtle">Hand-picked items for you</p>
    </div>

    <% if @featured_products.present? && @featured_products.any? %>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <% @featured_products.each do |product| %>
          <div class="card card-interactive p-5 flex flex-col animate-fade-in">
            <div class="aspect-[4/3] w-full rounded-md border border-[rgba(54,47,45,0.08)] grid place-items-center text-subtle overflow-hidden">
              <% if product.respond_to?(:images) && product.images.attached? %>
                <%= link_to product_path(product) do %>
                  <% if defined?(cl_image_tag) %>
                    <%= cl_image_tag(product.images.first.key, width: 600, height: 450, crop: "fill", alt: product.name, class: "w-full h-full object-cover", loading: "lazy") %>
                  <% else %>
                    <%= image_tag url_for(product.images.first), alt: product.name, class: "w-full h-full object-cover", loading: "lazy" %>
                  <% end %>
                <% end %>
              <% elsif product.respond_to?(:image_url) && product.image_url.present? %>
                <%= link_to product_path(product) do %>
                  <%= image_tag product.image_url, alt: product.name, class: "w-full h-full object-cover", loading: "lazy" %>
                <% end %>
              <% else %>
                <i data-lucide="image" class="w-6 h-6"></i>
                <span class="sr-only">No image</span>
              <% end %>
            </div>
            <div class="flex-1 mt-4">
              <h3 class="text-lg font-semibold" style="color: var(--text);"><%= product.name %></h3>
              <p class="text-sm text-subtle mt-1 line-clamp-3"><%= truncate(product.description, length: 120) %></p>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <p class="text-xl font-semibold" style="color: var(--text);"><%= number_to_currency(product.price) %></p>
              <div class="flex items-center gap-2">
                <%= link_to product_path(product), class: "btn-ghost" do %>
                  <i data-lucide="eye" class="w-4 h-4"></i>
                  <span>View</span>
                <% end %>
                <% unless current_user&.role&.name == "admin" %>
                  <%= button_to cart_items_path(product_id: product.id), method: :post, class: "btn-primary" do %>
                    <i data-lucide="shopping-cart" class="w-4 h-4"></i>
                    <span>Add</span>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="card p-12 text-center">
        <h3 class="text-lg font-semibold" style="color: var(--text);">No featured products yet</h3>
        <p class="text-subtle">We don't have featured items right now. Check back later or browse all products.</p>
        <div class="mt-4">
          <%= link_to "Browse Products", products_path, class: "btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>
</section>

<!-- PROMO BANNER -->
<section class="mt-12">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="card overflow-hidden relative">
      <img src="https://images.unsplash.com/photo-1470337458703-46ad1756a187?q=80&w=1600&auto=format&fit=crop" alt="Promo" class="absolute inset-0 w-full h-full object-cover" />
      <div class="relative p-10 md:p-14 bg-gradient-to-r from-black/50 to-black/10">
        <h3 class="text-2xl md:text-3xl font-semibold text-white">Brew better. Work better.</h3>
        <p class="text-white/90 mt-2 max-w-2xl">Save 15% on pour-over coffee sets and desk organizers.</p>
        <div class="mt-5">
          <%= link_to products_path, class: "btn-primary" do %>
            <i data-lucide="badge-percent" class="w-4 h-4"></i>
            <span>View offers</span>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- NEWSLETTER -->
<section class="mt-12">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="card p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
      <div>
        <h3 class="text-xl font-semibold" style="color: var(--text);">Get updates, no noise</h3>
        <p class="text-subtle">Monthly picks, launches and tips. Unsubscribe anytime.</p>
      </div>
      <form class="flex w-full md:w-auto gap-2">
        <label for="newsletter_email" class="sr-only">Email address</label>
        <input id="newsletter_email" type="email" placeholder="you@example.com" class="px-3 py-2 w-full md:w-72" />
        <button type="button" class="btn-primary"><i data-lucide="send" class="w-4 h-4"></i> Subscribe</button>
      </form>
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section class="mt-12 mb-6">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <h2 class="text-2xl font-semibold mb-4" style="color: var(--text);">What customers say</h2>
    <div class="grid md:grid-cols-3 gap-4">
      <% [
        { name: 'Alex', quote: 'Beautifully simple and well-made. The experience felt calm and premium.' },
        { name: 'Jordan', quote: 'Love the matte finishes. Shipping was fast and support was helpful.' },
        { name: 'Casey', quote: 'Carefully curated products that actually last — I keep coming back.' }
      ].each do |t| %>
        <div class="card p-5">
          <div class="flex items-center gap-3">
            <div class="avatar-fallback"><%= t[:name][0] %></div>
            <div>
              <div class="font-semibold" style="color: var(--text);"><%= t[:name] %></div>
              <div class="text-xs text-subtle">Verified Buyer</div>
            </div>
          </div>
          <p class="mt-3 text-[15px] text-[var(--text)]/90">“<%= t[:quote] %>”</p>
        </div>
      <% end %>
    </div>
  </div>
</section>
